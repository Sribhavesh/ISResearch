<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAMãƒ™ãƒ¼ã‚¹ã®æŠ€è¡“æ‹¡æ•£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 5px;
            font-size: 28px;
            font-weight: 600;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .simulation-container {
            display: grid;
            grid-template-columns: 800px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        #canvasContainer {
            background: #f7fafc;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .controls {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
            font-size: 13px;
        }
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        .value-display {
            min-width: 45px;
            text-align: center;
            padding: 4px 8px;
            background: #edf2f7;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #2d3748;
        }
        .btn-container {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }
        .stat-label {
            font-size: 11px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
        }
        .stat-percentage {
            font-size: 12px;
            color: #48bb78;
            margin-left: 5px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .chart {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .chart-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        .legend {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .legend-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .model-description {
            background: #fef5e7;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #f39c12;
        }
        .model-description h3 {
            color: #2d3748;
            margin-top: 0;
            font-size: 16px;
        }
        .model-description ul {
            margin: 10px 0;
            padding-left: 20px;
            line-height: 1.6;
            font-size: 13px;
            color: #4a5568;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ TAMãƒ™ãƒ¼ã‚¹æŠ€è¡“æ‹¡æ•£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ‡ãƒ«</h1>
        <p class="subtitle">Technology Acceptance Model Ã— Agent-Based Simulation</p>
        
        <div class="simulation-container">
            <div id="canvasContainer"></div>
            
            <div class="controls">
                <h3 style="margin-top: 0; color: #2d3748; font-size: 16px;">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡</h3>
                
                <div class="control-group">
                    <label>æŠ€è¡“ã®æœ‰ç”¨æ€§ (Perceived Usefulness)</label>
                    <div class="slider-container">
                        <input type="range" id="usefulness" min="0" max="100" value="60">
                        <span class="value-display" id="usefulnessValue">60</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>æŠ€è¡“ã®ä½¿ã„ã‚„ã™ã• (Perceived Ease of Use)</label>
                    <div class="slider-container">
                        <input type="range" id="easeOfUse" min="0" max="100" value="50">
                        <span class="value-display" id="easeOfUseValue">50</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>ç¤¾ä¼šçš„å½±éŸ¿åŠ› (Social Influence)</label>
                    <div class="slider-container">
                        <input type="range" id="socialInfluence" min="0" max="100" value="30">
                        <span class="value-display" id="socialInfluenceValue">30</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼æ¯”ç‡ (%)</label>
                    <div class="slider-container">
                        <input type="range" id="innovators" min="1" max="20" value="5">
                        <span class="value-display" id="innovatorsValue">5%</span>
                    </div>
                </div>
                
                <div class="btn-container">
                    <button class="btn-primary" onclick="startSimulation()">é–‹å§‹</button>
                    <button class="btn-secondary" onclick="pauseSimulation()">ä¸€æ™‚åœæ­¢</button>
                    <button class="btn-secondary" onclick="resetSimulation()">ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">æ¡ç”¨è€…æ•°</div>
                        <div class="stat-value">
                            <span id="adopters">0</span>
                            <span class="stat-percentage" id="adoptersPercent">0%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">æ¤œè¨ä¸­</div>
                        <div class="stat-value">
                            <span id="considering">0</span>
                            <span class="stat-percentage" id="consideringPercent">0%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">æ™‚é–“çµŒé</div>
                        <div class="stat-value" id="timeStep">0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-title">ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color" style="background: #90EE90;"></div>
                    <span>ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼ï¼ˆåˆæœŸæ¡ç”¨è€…ï¼‰</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4169E1;"></div>
                    <span>æ¡ç”¨è€…</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFD700;"></div>
                    <span>æ¤œè¨ä¸­</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #D3D3D3;"></div>
                    <span>æœªèªçŸ¥</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF6B6B;"></div>
                    <span>æ‹’å¦è€…</span>
                </div>
            </div>
        </div>
        
        <div class="charts-container">
            <div class="chart">
                <div class="chart-title">ğŸ“ˆ æ¡ç”¨ç‡ã®æ¨ç§»</div>
                <div id="adoptionChart"></div>
            </div>
            <div class="chart">
                <div class="chart-title">ğŸ“Š ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ†å¸ƒ</div>
                <div id="distributionChart"></div>
            </div>
        </div>
        
        <div class="model-description">
            <h3>ãƒ¢ãƒ‡ãƒ«ã®èª¬æ˜</h3>
            <ul>
                <li><strong>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¡Œå‹•</strong>ï¼šå„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯å€‹åˆ¥ã®PUï¼ˆæœ‰ç”¨æ€§ï¼‰ã¨PEOUï¼ˆä½¿ã„ã‚„ã™ã•ï¼‰ã®é–¾å€¤ã‚’æŒã¡ã€æŠ€è¡“è©•ä¾¡ã‚’è¡Œã„ã¾ã™</li>
                <li><strong>ç¤¾ä¼šçš„å½±éŸ¿</strong>ï¼šè¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ¡ç”¨çŠ¶æ³ãŒå€‹äººã®æ¡ç”¨æ±ºå®šã«å½±éŸ¿ï¼ˆTAM2ãƒ¢ãƒ‡ãƒ«ã®è¦ç´ ï¼‰</li>
                <li><strong>æ¡ç”¨ãƒ—ãƒ­ã‚»ã‚¹</strong>ï¼šæœªèªçŸ¥â†’æ¤œè¨ä¸­â†’æ¡ç”¨/æ‹’å¦ã®æ®µéšçš„é·ç§»</li>
                <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŠ¹æœ</strong>ï¼šæ¡ç”¨è€…ã®å¢—åŠ ã«ã‚ˆã‚Šã€ä»–è€…ã®çŸ¥è¦šã•ã‚ŒãŸæœ‰ç”¨æ€§ãŒå‘ä¸Š</li>
                <li><strong>å€‹äººå·®</strong>ï¼šé©æ–°æ€§ã€ãƒªã‚¹ã‚¯è¨±å®¹åº¦ã€æŠ€è¡“è¦ªå’Œæ€§ãŒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã”ã¨ã«ç•°ãªã‚‹</li>
            </ul>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let agents = [];
        let time = 0;
        let isRunning = false;
        let adoptionHistory = [];
        let canvas;
        
        // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        const NUM_AGENTS = 400;
        const CANVAS_WIDTH = 780;
        const CANVAS_HEIGHT = 500;
        
        // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¯ãƒ©ã‚¹
        class Agent {
            constructor(x, y, id) {
                this.id = id;
                this.x = x;
                this.y = y;
                this.vx = 0;
                this.vy = 0;
                
                // TAMãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆå€‹äººå·®ï¼‰
                this.puThreshold = random(20, 80);  // æœ‰ç”¨æ€§ã®é–¾å€¤
                this.peouThreshold = random(20, 80); // ä½¿ã„ã‚„ã™ã•ã®é–¾å€¤
                this.innovativeness = random(0, 100); // é©æ–°æ€§
                
                // çŠ¶æ…‹: 0=æœªèªçŸ¥, 1=æ¤œè¨ä¸­, 2=æ¡ç”¨, 3=æ‹’å¦
                this.state = 0;
                this.considerationTime = 0;
                this.maxConsiderationTime = random(10, 50);
                
                // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯
                this.neighbors = [];
                this.influenceRadius = 50;
            }
            
            update(techPU, techPEOU, socialInfluence) {
                // ç§»å‹•ï¼ˆãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ï¼‰
                this.vx += random(-0.5, 0.5);
                this.vy += random(-0.5, 0.5);
                this.vx *= 0.95; // æ¸›è¡°
                this.vy *= 0.95;
                
                this.x += this.vx;
                this.y += this.vy;
                
                // å¢ƒç•Œå‡¦ç†
                if (this.x < 10) this.x = 10;
                if (this.x > CANVAS_WIDTH - 10) this.x = CANVAS_WIDTH - 10;
                if (this.y < 10) this.y = 10;
                if (this.y > CANVAS_HEIGHT - 10) this.y = CANVAS_HEIGHT - 10;
                
                // è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ¤œå‡º
                this.findNeighbors();
                
                // çŠ¶æ…‹é·ç§»ãƒ­ã‚¸ãƒƒã‚¯
                if (this.state === 0) { // æœªèªçŸ¥
                    // è¿‘éš£ã«æ¡ç”¨è€…ãŒã„ã‚Œã°èªçŸ¥
                    let adoptedNeighbors = this.neighbors.filter(a => a.state === 2).length;
                    if (adoptedNeighbors > 0 || random(100) < 0.5) {
                        this.state = 1; // æ¤œè¨ä¸­ã¸
                    }
                } else if (this.state === 1) { // æ¤œè¨ä¸­
                    this.considerationTime++;
                    
                    // TAMã«åŸºã¥ãæ¡ç”¨æ±ºå®š
                    let perceivedPU = techPU;
                    let perceivedPEOU = techPEOU;
                    
                    // ç¤¾ä¼šçš„å½±éŸ¿ã®åæ˜ 
                    let adoptedNeighbors = this.neighbors.filter(a => a.state === 2).length;
                    let neighborInfluence = (adoptedNeighbors / max(this.neighbors.length, 1)) * socialInfluence;
                    
                    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŠ¹æœ
                    perceivedPU += neighborInfluence * 0.5;
                    perceivedPEOU += neighborInfluence * 0.3;
                    
                    // æ¡ç”¨æ„å›³ã®è¨ˆç®—ï¼ˆTAMãƒ¢ãƒ‡ãƒ«ï¼‰
                    let intention = (perceivedPU * 0.6 + perceivedPEOU * 0.4) * (1 + this.innovativeness / 200);
                    
                    if (this.considerationTime > this.maxConsiderationTime) {
                        if (intention > (this.puThreshold * 0.6 + this.peouThreshold * 0.4)) {
                            this.state = 2; // æ¡ç”¨
                        } else {
                            this.state = 3; // æ‹’å¦
                        }
                    }
                }
            }
            
            findNeighbors() {
                this.neighbors = agents.filter(a => {
                    if (a === this) return false;
                    let d = dist(this.x, this.y, a.x, a.y);
                    return d < this.influenceRadius;
                });
            }
            
            display() {
                push();
                
                // å½±éŸ¿ç¯„å›²ã®è¡¨ç¤ºï¼ˆæ¡ç”¨è€…ã®ã¿ï¼‰
                if (this.state === 2) {
                    noStroke();
                    fill(65, 105, 225, 30);
                    circle(this.x, this.y, this.influenceRadius * 2);
                }
                
                // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¡¨ç¤º
                let col;
                let size = 8;
                
                switch(this.state) {
                    case 0: col = color(211, 211, 211); break; // æœªèªçŸ¥ï¼šã‚°ãƒ¬ãƒ¼
                    case 1: col = color(255, 215, 0); size = 10; break; // æ¤œè¨ä¸­ï¼šé»„è‰²
                    case 2: col = color(65, 105, 225); size = 12; break; // æ¡ç”¨ï¼šé’
                    case 3: col = color(255, 107, 107); size = 6; break; // æ‹’å¦ï¼šèµ¤
                }
                
                // ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼ã¯ç‰¹åˆ¥ãªè‰²
                if (this.innovativeness > 90 && this.state === 2) {
                    col = color(144, 238, 144); // ç·‘
                    size = 14;
                }
                
                stroke(255, 100);
                strokeWeight(2);
                fill(col);
                circle(this.x, this.y, size);
                
                // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã®å¯è¦–åŒ–
                if (this.state === 2) {
                    stroke(65, 105, 225, 50);
                    strokeWeight(1);
                    this.neighbors.forEach(n => {
                        if (n.state === 2) {
                            line(this.x, this.y, n.x, n.y);
                        }
                    });
                }
                
                pop();
            }
        }
        
        // p5.jsé–¢æ•°
        function setup() {
            canvas = createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT);
            canvas.parent('canvasContainer');
            
            initializeSimulation();
            setupSliderListeners();
            initializeCharts();
        }
        
        function draw() {
            // èƒŒæ™¯ï¼ˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœï¼‰
            for(let i = 0; i <= CANVAS_HEIGHT; i++) {
                let inter = map(i, 0, CANVAS_HEIGHT, 0, 1);
                let c = lerpColor(color(240, 248, 255), color(255, 255, 255), inter);
                stroke(c);
                line(0, i, CANVAS_WIDTH, i);
            }
            
            // ã‚°ãƒªãƒƒãƒ‰
            stroke(200, 50);
            strokeWeight(0.5);
            for(let x = 0; x < CANVAS_WIDTH; x += 50) {
                line(x, 0, x, CANVAS_HEIGHT);
            }
            for(let y = 0; y < CANVAS_HEIGHT; y += 50) {
                line(0, y, CANVAS_WIDTH, y);
            }
            
            if (isRunning) {
                // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾—
                let techPU = parseFloat(document.getElementById('usefulness').value);
                let techPEOU = parseFloat(document.getElementById('easeOfUse').value);
                let socialInf = parseFloat(document.getElementById('socialInfluence').value);
                
                // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ›´æ–°
                agents.forEach(agent => {
                    agent.update(techPU, techPEOU, socialInf);
                });
                
                time++;
                
                // çµ±è¨ˆæ›´æ–°
                if (time % 5 === 0) {
                    updateStatistics();
                    updateCharts();
                }
            }
            
            // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæç”»
            agents.forEach(agent => {
                agent.display();
            });
            
            // æ™‚é–“è¡¨ç¤º
            document.getElementById('timeStep').textContent = time;
        }
        
        function initializeSimulation() {
            agents = [];
            time = 0;
            adoptionHistory = [];
            
            // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”Ÿæˆ
            for(let i = 0; i < NUM_AGENTS; i++) {
                let x = random(20, CANVAS_WIDTH - 20);
                let y = random(20, CANVAS_HEIGHT - 20);
                agents.push(new Agent(x, y, i));
            }
            
            // ã‚¤ãƒãƒ™ãƒ¼ã‚¿ãƒ¼è¨­å®š
            let innovatorCount = Math.floor(NUM_AGENTS * parseFloat(document.getElementById('innovators').value) / 100);
            for(let i = 0; i < innovatorCount; i++) {
                agents[i].state = 2; // æ¡ç”¨çŠ¶æ…‹
                agents[i].innovativeness = 95;
            }
            
            updateStatistics();
        }
        
        function updateStatistics() {
            let adopters = agents.filter(a => a.state === 2).length;
            let considering = agents.filter(a => a.state === 1).length;
            let rejected = agents.filter(a => a.state === 3).length;
            
            document.getElementById('adopters').textContent = adopters;
            document.getElementById('adoptersPercent').textContent = 
                `${(adopters / NUM_AGENTS * 100).toFixed(1)}%`;
            
            document.getElementById('considering').textContent = considering;
            document.getElementById('consideringPercent').textContent = 
                `${(considering / NUM_AGENTS * 100).toFixed(1)}%`;
            
            // å±¥æ­´è¨˜éŒ²
            adoptionHistory.push({
                time: time,
                adopters: adopters,
                considering: considering,
                rejected: rejected,
                unaware: NUM_AGENTS - adopters - considering - rejected
            });
        }
        
        function setupSliderListeners() {
            // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºæ›´æ–°
            document.getElementById('usefulness').addEventListener('input', function(e) {
                document.getElementById('usefulnessValue').textContent = e.target.value;
            });
            
            document.getElementById('easeOfUse').addEventListener('input', function(e) {
                document.getElementById('easeOfUseValue').textContent = e.target.value;
            });
            
            document.getElementById('socialInfluence').addEventListener('input', function(e) {
                document.getElementById('socialInfluenceValue').textContent = e.target.value;
            });
            
            document.getElementById('innovators').addEventListener('input', function(e) {
                document.getElementById('innovatorsValue').textContent = e.target.value + '%';
            });
        }
        
        function startSimulation() {
            isRunning = true;
        }
        
        function pauseSimulation() {
            isRunning = false;
        }
        
        function resetSimulation() {
            isRunning = false;
            initializeSimulation();
            initializeCharts();
        }
        
        function initializeCharts() {
            // æ¡ç”¨ç‡æ¨ç§»ãƒãƒ£ãƒ¼ãƒˆ
            let trace1 = {
                x: [0],
                y: [0],
                type: 'scatter',
                mode: 'lines',
                name: 'æ¡ç”¨è€…',
                line: {color: '#4169E1', width: 3}
            };
            
            let trace2 = {
                x: [0],
                y: [0],
                type: 'scatter',
                mode: 'lines',
                name: 'æ¤œè¨ä¸­',
                line: {color: '#FFD700', width: 2}
            };
            
            let layout1 = {
                height: 250,
                margin: {t: 20, r: 20, b: 40, l: 50},
                xaxis: {title: 'æ™‚é–“'},
                yaxis: {title: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°'},
                showlegend: true,
                legend: {x: 0, y: 1}
            };
            
            Plotly.newPlot('adoptionChart', [trace1, trace2], layout1, {displayModeBar: false});
            
            // åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆ
            let trace3 = {
                values: [NUM_AGENTS, 0, 0, 0],
                labels: ['æœªèªçŸ¥', 'æ¤œè¨ä¸­', 'æ¡ç”¨', 'æ‹’å¦'],
                type: 'pie',
                marker: {
                    colors: ['#D3D3D3', '#FFD700', '#4169E1', '#FF6B6B']
                }
            };
            
            let layout2 = {
                height: 250,
                margin: {t: 20, r: 20, b: 20, l: 20}
            };
            
            Plotly.newPlot('distributionChart', [trace3], layout2, {displayModeBar: false});
        }
        
        function updateCharts() {
            if (adoptionHistory.length > 0) {
                let latest = adoptionHistory[adoptionHistory.length - 1];
                
                // æ¡ç”¨ç‡æ¨ç§»ã®æ›´æ–°
                let times = adoptionHistory.map(h => h.time);
                let adopters = adoptionHistory.map(h => h.adopters);
                let considering = adoptionHistory.map(h => h.considering);
                
                Plotly.update('adoptionChart', {
                    x: [times, times],
                    y: [adopters, considering]
                }, {}, [0, 1]);
                
                // åˆ†å¸ƒã®æ›´æ–°
                Plotly.update('distributionChart', {
                    values: [[latest.unaware, latest.considering, latest.adopters, latest.rejected]]
                }, {}, [0]);
            }
        }
    </script>
</body>
</html>