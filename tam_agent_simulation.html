<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAM„Éô„Éº„Çπ„ÅÆÊäÄË°ìÊã°Êï£„Ç®„Éº„Ç∏„Çß„É≥„Éà„É¢„Éá„É´</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 5px;
            font-size: 28px;
            font-weight: 600;
        }
        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .simulation-container {
            display: grid;
            grid-template-columns: 800px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        #canvasContainer {
            background: #f7fafc;
            border-radius: 12px;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .controls {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
            font-size: 13px;
        }
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        .value-display {
            min-width: 45px;
            text-align: center;
            padding: 4px 8px;
            background: #edf2f7;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            color: #2d3748;
        }
        .btn-container {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, #f6f8fb 0%, #ffffff 100%);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }
        .stat-label {
            font-size: 11px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
        }
        .stat-percentage {
            font-size: 12px;
            color: #48bb78;
            margin-left: 5px;
        }
        .charts-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        .chart {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }
        .chart-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        .legend {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .legend-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .model-description {
            background: #fef5e7;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #f39c12;
        }
        .model-description h3 {
            color: #2d3748;
            margin-top: 0;
            font-size: 16px;
        }
        .model-description ul {
            margin: 10px 0;
            padding-left: 20px;
            line-height: 1.6;
            font-size: 13px;
            color: #4a5568;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ TAM„Éô„Éº„ÇπÊäÄË°ìÊã°Êï£„Ç®„Éº„Ç∏„Çß„É≥„Éà„É¢„Éá„É´</h1>
        <p class="subtitle">Technology Acceptance Model √ó Agent-Based Simulation</p>
        
        <div class="simulation-container">
            <div id="canvasContainer"></div>
            
            <div class="controls">
                <h3 style="margin-top: 0; color: #2d3748; font-size: 16px;">„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Âà∂Âæ°</h3>
                
                <div class="control-group">
                    <label>ÊäÄË°ì„ÅÆÊúâÁî®ÊÄß (Perceived Usefulness)</label>
                    <div class="slider-container">
                        <input type="range" id="usefulness" min="0" max="100" value="60">
                        <span class="value-display" id="usefulnessValue">60</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>ÊäÄË°ì„ÅÆ‰Ωø„ÅÑ„ÇÑ„Åô„Åï (Perceived Ease of Use)</label>
                    <div class="slider-container">
                        <input type="range" id="easeOfUse" min="0" max="100" value="50">
                        <span class="value-display" id="easeOfUseValue">50</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>Á§æ‰ºöÁöÑÂΩ±ÈüøÂäõ (Social Influence)</label>
                    <div class="slider-container">
                        <input type="range" id="socialInfluence" min="0" max="100" value="30">
                        <span class="value-display" id="socialInfluenceValue">30</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>„Ç§„Éé„Éô„Éº„Çø„ÉºÊØîÁéá (%)</label>
                    <div class="slider-container">
                        <input type="range" id="innovators" min="1" max="20" value="5">
                        <span class="value-display" id="innovatorsValue">5%</span>
                    </div>
                </div>
                
                <div class="btn-container">
                    <button class="btn-primary" onclick="startSimulation()">ÈñãÂßã</button>
                    <button class="btn-secondary" onclick="pauseSimulation()">‰∏ÄÊôÇÂÅúÊ≠¢</button>
                    <button class="btn-secondary" onclick="resetSimulation()">„É™„Çª„ÉÉ„Éà</button>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-label">Êé°Áî®ËÄÖÊï∞</div>
                        <div class="stat-value">
                            <span id="adopters">0</span>
                            <span class="stat-percentage" id="adoptersPercent">0%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Ê§úË®é‰∏≠</div>
                        <div class="stat-value">
                            <span id="considering">0</span>
                            <span class="stat-percentage" id="consideringPercent">0%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ÊôÇÈñìÁµåÈÅé</div>
                        <div class="stat-value" id="timeStep">0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-title">„Ç®„Éº„Ç∏„Çß„É≥„ÉàÁä∂ÊÖã</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color" style="background: #90EE90;"></div>
                    <span>„Ç§„Éé„Éô„Éº„Çø„ÉºÔºàÂàùÊúüÊé°Áî®ËÄÖÔºâ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4169E1;"></div>
                    <span>Êé°Áî®ËÄÖ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FFD700;"></div>
                    <span>Ê§úË®é‰∏≠</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #D3D3D3;"></div>
                    <span>Êú™Ë™çÁü•</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #FF6B6B;"></div>
                    <span>ÊãíÂê¶ËÄÖ</span>
                </div>
            </div>
        </div>
        
        <div class="charts-container">
            <div class="chart">
                <div class="chart-title">üìà Êé°Áî®Áéá„ÅÆÊé®Áßª</div>
                <div id="adoptionChart"></div>
            </div>
            <div class="chart">
                <div class="chart-title">üìä „Ç®„Éº„Ç∏„Çß„É≥„ÉàÂàÜÂ∏É</div>
                <div id="distributionChart"></div>
            </div>
        </div>
        
        <div class="model-description">
            <h3>„É¢„Éá„É´„ÅÆË™¨Êòé</h3>
            <ul>
                <li><strong>„Ç®„Éº„Ç∏„Çß„É≥„ÉàË°åÂãï</strong>ÔºöÂêÑ„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅØÂÄãÂà•„ÅÆPUÔºàÊúâÁî®ÊÄßÔºâ„Å®PEOUÔºà‰Ωø„ÅÑ„ÇÑ„Åô„ÅïÔºâ„ÅÆÈñæÂÄ§„ÇíÊåÅ„Å°„ÄÅÊäÄË°ìË©ï‰æ°„ÇíË°å„ÅÑ„Åæ„Åô</li>
                <li><strong>Á§æ‰ºöÁöÑÂΩ±Èüø</strong>ÔºöËøëÈö£„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÊé°Áî®Áä∂Ê≥Å„ÅåÂÄã‰∫∫„ÅÆÊé°Áî®Ê±∫ÂÆö„Å´ÂΩ±ÈüøÔºàTAM2„É¢„Éá„É´„ÅÆË¶ÅÁ¥†Ôºâ</li>
                <li><strong>Êé°Áî®„Éó„É≠„Çª„Çπ</strong>ÔºöÊú™Ë™çÁü•‚ÜíÊ§úË®é‰∏≠‚ÜíÊé°Áî®/ÊãíÂê¶„ÅÆÊÆµÈöéÁöÑÈÅ∑Áßª</li>
                <li><strong>„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÂäπÊûú</strong>ÔºöÊé°Áî®ËÄÖ„ÅÆÂ¢óÂä†„Å´„Çà„Çä„ÄÅ‰ªñËÄÖ„ÅÆÁü•Ë¶ö„Åï„Çå„ÅüÊúâÁî®ÊÄß„ÅåÂêë‰∏ä</li>
                <li><strong>ÂÄã‰∫∫Â∑Æ</strong>ÔºöÈù©Êñ∞ÊÄß„ÄÅ„É™„Çπ„ÇØË®±ÂÆπÂ∫¶„ÄÅÊäÄË°ìË¶™ÂíåÊÄß„Åå„Ç®„Éº„Ç∏„Çß„É≥„Éà„Åî„Å®„Å´Áï∞„Å™„Çã</li>
            </ul>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let agents = [];
        let time = 0;
        let isRunning = false;
        let adoptionHistory = [];
        let canvas;
        
        // „Éë„É©„É°„Éº„Çø
        const NUM_AGENTS = 400;
        const CANVAS_WIDTH = 780;
        const CANVAS_HEIGHT = 500;
        
        // „Ç®„Éº„Ç∏„Çß„É≥„Éà„ÇØ„É©„Çπ
        class Agent {
            constructor(x, y, id) {
                this.id = id;
                this.x = x;
                this.y = y;
                this.vx = 0;
                this.vy = 0;
                
                // TAM„Éë„É©„É°„Éº„ÇøÔºàÂÄã‰∫∫Â∑ÆÔºâ
                this.puThreshold = random(20, 80);  // ÊúâÁî®ÊÄß„ÅÆÈñæÂÄ§
                this.peouThreshold = random(20, 80); // ‰Ωø„ÅÑ„ÇÑ„Åô„Åï„ÅÆÈñæÂÄ§
                this.innovativeness = random(0, 100); // Èù©Êñ∞ÊÄß
                
                // Áä∂ÊÖã: 0=Êú™Ë™çÁü•, 1=Ê§úË®é‰∏≠, 2=Êé°Áî®, 3=ÊãíÂê¶
                this.state = 0;
                this.considerationTime = 0;
                this.maxConsiderationTime = random(10, 50);
                
                // „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ
                this.neighbors = [];
                this.influenceRadius = 50;
            }
            
            update(techPU, techPEOU, socialInfluence) {
                // ÁßªÂãïÔºà„É©„É≥„ÉÄ„É†„Ç¶„Ç©„Éº„ÇØÔºâ
                this.vx += random(-0.5, 0.5);
                this.vy += random(-0.5, 0.5);
                this.vx *= 0.95; // Ê∏õË°∞
                this.vy *= 0.95;
                
                this.x += this.vx;
                this.y += this.vy;
                
                // Â¢ÉÁïåÂá¶ÁêÜ
                if (this.x < 10) this.x = 10;
                if (this.x > CANVAS_WIDTH - 10) this.x = CANVAS_WIDTH - 10;
                if (this.y < 10) this.y = 10;
                if (this.y > CANVAS_HEIGHT - 10) this.y = CANVAS_HEIGHT - 10;
                
                // ËøëÈö£„Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆÊ§úÂá∫
                this.findNeighbors();
                
                // Áä∂ÊÖãÈÅ∑Áßª„É≠„Ç∏„ÉÉ„ÇØ
                if (this.state === 0) { // Êú™Ë™çÁü•
                    // ËøëÈö£„Å´Êé°Áî®ËÄÖ„Åå„ÅÑ„Çå„Å∞Ë™çÁü•
                    let adoptedNeighbors = this.neighbors.filter(a => a.state === 2).length;
                    if (adoptedNeighbors > 0 || random(100) < 0.5) {
                        this.state = 1; // Ê§úË®é‰∏≠„Å∏
                    }
                } else if (this.state === 1) { // Ê§úË®é‰∏≠
                    this.considerationTime++;
                    
                    // TAM„Å´Âü∫„Å•„ÅèÊé°Áî®Ê±∫ÂÆö
                    let perceivedPU = techPU;
                    let perceivedPEOU = techPEOU;
                    
                    // Á§æ‰ºöÁöÑÂΩ±Èüø„ÅÆÂèçÊò†
                    let adoptedNeighbors = this.neighbors.filter(a => a.state === 2).length;
                    let neighborInfluence = (adoptedNeighbors / max(this.neighbors.length, 1)) * socialInfluence;
                    
                    // „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÂäπÊûú
                    perceivedPU += neighborInfluence * 0.5;
                    perceivedPEOU += neighborInfluence * 0.3;
                    
                    // Êé°Áî®ÊÑèÂõ≥„ÅÆË®àÁÆóÔºàTAM„É¢„Éá„É´Ôºâ
                    let intention = (perceivedPU * 0.6 + perceivedPEOU * 0.4) * (1 + this.innovativeness / 200);
                    
                    if (this.considerationTime > this.maxConsiderationTime) {
                        if (intention > (this.puThreshold * 0.6 + this.peouThreshold * 0.4)) {
                            this.state = 2; // Êé°Áî®
                        } else {
                            this.state = 3; // ÊãíÂê¶
                        }
                    }
                }
            }
            
            findNeighbors() {
                this.neighbors = agents.filter(a => {
                    if (a === this) return false;
                    let d = dist(this.x, this.y, a.x, a.y);
                    return d < this.influenceRadius;
                });
            }
            
            display() {
                push();
                
                // ÂΩ±ÈüøÁØÑÂõ≤„ÅÆË°®Á§∫ÔºàÊé°Áî®ËÄÖ„ÅÆ„ÅøÔºâ
                if (this.state === 2) {
                    noStroke();
                    fill(65, 105, 225, 30);
                    circle(this.x, this.y, this.influenceRadius * 2);
                }
                
                // „Ç®„Éº„Ç∏„Çß„É≥„Éà„ÅÆË°®Á§∫
                let col;
                let size = 8;
                
                switch(this.state) {
                    case 0: col = color(211, 211, 211); break; // Êú™Ë™çÁü•Ôºö„Ç∞„É¨„Éº
                    case 1: col = color(255, 215, 0); size = 10; break; // Ê§úË®é‰∏≠ÔºöÈªÑËâ≤
                    case 2: col = color(65, 105, 225); size = 12; break; // Êé°Áî®ÔºöÈùí
                    case 3: col = color(255, 107, 107); size = 6; break; // ÊãíÂê¶ÔºöËµ§
                }
                
                // „Ç§„Éé„Éô„Éº„Çø„Éº„ÅØÁâπÂà•„Å™Ëâ≤
                if (this.innovativeness > 90 && this.state === 2) {
                    col = color(144, 238, 144); // Á∑ë
                    size = 14;
                }
                
                stroke(255, 100);
                strokeWeight(2);
                fill(col);
                circle(this.x, this.y, size);
                
                // „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊé•Á∂ö„ÅÆÂèØË¶ñÂåñ
                if (this.state === 2) {
                    stroke(65, 105, 225, 50);
                    strokeWeight(1);
                    this.neighbors.forEach(n => {
                        if (n.state === 2) {
                            line(this.x, this.y, n.x, n.y);
                        }
                    });
                }
                
                pop();
            }
        }
        
        // p5.jsÈñ¢Êï∞
        function setup() {
            canvas = createCanvas(CANVAS_WIDTH, CANVAS_HEIGHT);
            canvas.parent('canvasContainer');
            
            initializeSimulation();
            setupSliderListeners();
            initializeCharts();
        }
        
        function draw() {
            // ËÉåÊôØÔºà„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ÂäπÊûúÔºâ
            for(let i = 0; i <= CANVAS_HEIGHT; i++) {
                let inter = map(i, 0, CANVAS_HEIGHT, 0, 1);
                let c = lerpColor(color(240, 248, 255), color(255, 255, 255), inter);
                stroke(c);
                line(0, i, CANVAS_WIDTH, i);
            }
            
            // „Ç∞„É™„ÉÉ„Éâ
            stroke(200, 50);
            strokeWeight(0.5);
            for(let x = 0; x < CANVAS_WIDTH; x += 50) {
                line(x, 0, x, CANVAS_HEIGHT);
            }
            for(let y = 0; y < CANVAS_HEIGHT; y += 50) {
                line(0, y, CANVAS_WIDTH, y);
            }
            
            if (isRunning) {
                // „Éë„É©„É°„Éº„ÇøÂèñÂæó
                let techPU = parseFloat(document.getElementById('usefulness').value);
                let techPEOU = parseFloat(document.getElementById('easeOfUse').value);
                let socialInf = parseFloat(document.getElementById('socialInfluence').value);
                
                // „Ç®„Éº„Ç∏„Çß„É≥„ÉàÊõ¥Êñ∞
                agents.forEach(agent => {
                    agent.update(techPU, techPEOU, socialInf);
                });
                
                time++;
                
                // Áµ±Ë®àÊõ¥Êñ∞
                if (time % 5 === 0) {
                    updateStatistics();
                    updateCharts();
                }
            }
            
            // „Ç®„Éº„Ç∏„Çß„É≥„ÉàÊèèÁîª
            agents.forEach(agent => {
                agent.display();
            });
            
            // ÊôÇÈñìË°®Á§∫
            document.getElementById('timeStep').textContent = time;
        }
        
        function initializeSimulation() {
            agents = [];
            time = 0;
            adoptionHistory = [];
            
            // „Ç®„Éº„Ç∏„Çß„É≥„ÉàÁîüÊàê
            for(let i = 0; i < NUM_AGENTS; i++) {
                let x = random(20, CANVAS_WIDTH - 20);
                let y = random(20, CANVAS_HEIGHT - 20);
                agents.push(new Agent(x, y, i));
            }
            
            // „Ç§„Éé„Éô„Éº„Çø„ÉºË®≠ÂÆö
            let innovatorCount = Math.floor(NUM_AGENTS * parseFloat(document.getElementById('innovators').value) / 100);
            for(let i = 0; i < innovatorCount; i++) {
                agents[i].state = 2; // Êé°Áî®Áä∂ÊÖã
                agents[i].innovativeness = 95;
            }
            
            updateStatistics();
        }
        
        function updateStatistics() {
            let adopters = agents.filter(a => a.state === 2).length;
            let considering = agents.filter(a => a.state === 1).length;
            let rejected = agents.filter(a => a.state === 3).length;
            
            document.getElementById('adopters').textContent = adopters;
            document.getElementById('adoptersPercent').textContent = 
                `${(adopters / NUM_AGENTS * 100).toFixed(1)}%`;
            
            document.getElementById('considering').textContent = considering;
            document.getElementById('consideringPercent').textContent = 
                `${(considering / NUM_AGENTS * 100).toFixed(1)}%`;
            
            // Â±•Ê≠¥Ë®òÈå≤
            adoptionHistory.push({
                time: time,
                adopters: adopters,
                considering: considering,
                rejected: rejected,
                unaware: NUM_AGENTS - adopters - considering - rejected
            });
        }
        
        function setupSliderListeners() {
            // „Çπ„É©„Ç§„ÉÄ„Éº„ÅÆÂÄ§Ë°®Á§∫Êõ¥Êñ∞
            document.getElementById('usefulness').addEventListener('input', function(e) {
                document.getElementById('usefulnessValue').textContent = e.target.value;
            });
            
            document.getElementById('easeOfUse').addEventListener('input', function(e) {
                document.getElementById('easeOfUseValue').textContent = e.target.value;
            });
            
            document.getElementById('socialInfluence').addEventListener('input', function(e) {
                document.getElementById('socialInfluenceValue').textContent = e.target.value;
            });
            
            document.getElementById('innovators').addEventListener('input', function(e) {
                document.getElementById('innovatorsValue').textContent = e.target.value + '%';
            });
        }
        
        function startSimulation() {
            isRunning = true;
        }
        
        function pauseSimulation() {
            isRunning = false;
        }
        
        function resetSimulation() {
            isRunning = false;
            initializeSimulation();
            initializeCharts();
        }
        
        function initializeCharts() {
            // Êé°Áî®ÁéáÊé®Áßª„ÉÅ„É£„Éº„Éà
            let trace1 = {
                x: [0],
                y: [0],
                type: 'scatter',
                mode: 'lines',
                name: 'Êé°Áî®ËÄÖ',
                line: {color: '#4169E1', width: 3}
            };
            
            let trace2 = {
                x: [0],
                y: [0],
                type: 'scatter',
                mode: 'lines',
                name: 'Ê§úË®é‰∏≠',
                line: {color: '#FFD700', width: 2}
            };
            
            let layout1 = {
                height: 250,
                margin: {t: 20, r: 20, b: 40, l: 50},
                xaxis: {title: 'ÊôÇÈñì'},
                yaxis: {title: '„Ç®„Éº„Ç∏„Çß„É≥„ÉàÊï∞'},
                showlegend: true,
                legend: {x: 0, y: 1}
            };
            
            Plotly.newPlot('adoptionChart', [trace1, trace2], layout1, {displayModeBar: false});
            
            // ÂàÜÂ∏É„ÉÅ„É£„Éº„Éà
            let trace3 = {
                values: [NUM_AGENTS, 0, 0, 0],
                labels: ['Êú™Ë™çÁü•', 'Ê§úË®é‰∏≠', 'Êé°Áî®', 'ÊãíÂê¶'],
                type: 'pie',
                marker: {
                    colors: ['#D3D3D3', '#FFD700', '#4169E1', '#FF6B6B']
                }
            };
            
            let layout2 = {
                height: 250,
                margin: {t: 20, r: 20, b: 20, l: 20}
            };
            
            Plotly.newPlot('distributionChart', [trace3], layout2, {displayModeBar: false});
        }
        
        function updateCharts() {
            if (adoptionHistory.length > 0) {
                let latest = adoptionHistory[adoptionHistory.length - 1];
                
                // Êé°Áî®ÁéáÊé®Áßª„ÅÆÊõ¥Êñ∞
                let times = adoptionHistory.map(h => h.time);
                let adopters = adoptionHistory.map(h => h.adopters);
                let considering = adoptionHistory.map(h => h.considering);
                
                Plotly.update('adoptionChart', {
                    x: [times, times],
                    y: [adopters, considering]
                }, {}, [0, 1]);
                
                // ÂàÜÂ∏É„ÅÆÊõ¥Êñ∞
                Plotly.update('distributionChart', {
                    values: [[latest.unaware, latest.considering, latest.adopters, latest.rejected]]
                }, {}, [0]);
            }
        }
    </script>
</body>
</html>